<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>➕ Add New Game Turn</h1>
        <a href="/admin/game_turns" class="btn btn-secondary">← Back to Game Turns</a>
    </div>

    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">Create New Turn</h5>
        </div>
        <div class="card-body">
            <form method="POST" action="/admin/game_turns/add">
                <div class="row">
                    <div class="col-md-4">
                        <div class="mb-3">
                            <label for="turn_number" class="form-label">Turn Number</label>
                            <input type="text" 
                                   class="form-control" 
                                   id="turn_number" 
                                   name="turn_number" 
                                   value="<%= nextTurnNumber %>" 
                                   readonly 
                                   disabled>
                            <div class="form-text">Next turn number (auto-calculated)</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="mb-3">
                            <label for="status" class="form-label">Status</label>
                            <input type="text" 
                                   class="form-control" 
                                   id="status" 
                                   name="status" 
                                   value="🔄 Active" 
                                   readonly 
                                   disabled>
                            <div class="form-text">New turns are always active</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="mb-3">
                            <label for="start_time" class="form-label">Start Time</label>
                                                         <input type="text" 
                                    class="form-control" 
                                    id="start_time" 
                                    name="start_time" 
                                    value="<%= new Date().toLocaleString() %>" 
                                    readonly 
                                    disabled>
                             <div class="form-text">Current time (now) - will be set to 1 second after current active turn ends</div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="end_time" class="form-label">End Time</label>
                            <input type="datetime-local" 
                                   class="form-control" 
                                   id="end_time" 
                                   name="end_time" 
                                   value="<%= defaultEndTime %>" 
                                   required>
                            <div class="form-text">Must be in the future (default: 24h from now)</div>
                            <div id="end_time_validation" class="form-text text-danger validation-error"></div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="command_deadline" class="form-label">Command Deadline</label>
                            <input type="datetime-local" 
                                   class="form-control" 
                                   id="command_deadline" 
                                   name="command_deadline" 
                                   value="<%= defaultCommandDeadline %>" 
                                   required>
                            <div class="form-text">Must be in the future and before end time (default: 20h from now)</div>
                            <div id="command_deadline_validation" class="form-text text-danger validation-error"></div>
                        </div>
                    </div>
                </div>

                <% if (typeof validationError !== 'undefined' && validationError) { %>
                    <div class="alert alert-danger">
                        <strong>❌ Validation Error:</strong> <%= validationError %>
                    </div>
                <% } %>

                <div class="alert alert-info">
                    <strong>💡 Tip:</strong> Only end time and command deadline can be edited. Both must be in the future, and command deadline must be before end time. The current active turn will be ended when this new turn is created.
                </div>

                <div class="d-flex gap-2">
                    <button type="submit" class="btn btn-success">
                        ➕ Create Turn
                    </button>
                    <a href="/admin/game_turns" class="btn btn-outline-secondary">
                        ❌ Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
